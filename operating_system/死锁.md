# 死锁

## 产生条件

死锁只有同时满足以下四个条件才会发生：

1. 互斥条件：
   - 多个线程不能同时使用同一个资源。
2. 持有并等待条件
   - 持有 A 资源时等待 B 资源的同时不会释放 A 资源。
3. 不可剥夺条件
   - 当线程已经持有资源时，使用完之前不能被其他线程获取。
4. 环路等待条件
   - 两个线程获取资源的顺序构成了环形链。

## 避免方法

免死锁问题就只需要破坏其中一个条件就可以，最常见的并且可行的就是使用**资源有序分配法**，来破坏**环路等待条件**。

- 资源有序分配法

线程 A 和线程 B 总是以**相同的顺序**申请自己想要的资源。