# 线程池核心参数

```java
public ThreadPoolExecutor(
    int corePoolSize,        // 1. 核心线程数
    int maximumPoolSize,     // 2. 最大线程数
    long keepAliveTime,      // 3. 空闲超时时间
    TimeUnit unit,           // 4. 时间单位
    BlockingQueue<Runnable> workQueue,  // 5. 任务阻塞队列
    ThreadFactory threadFactory,        // 6. 线程工厂
    RejectedExecutionHandler handler    // 7. 拒绝策略
);
```

- 核心线程数
  - 常驻的最小线程数
  - 即使空闲也不会主动回收
  - “基础员工”
  - **= CPU 核心数**
- 最大线程数
  - 允许创建的最大线程总数（核心线程 + 非核心线程：“临时工”）
  - “员工上限”
  - 线程池**最大并发数**（核心线程忙 + 队列满时，才会创建非核心线程）
  - **IO 密集型 = CPU 核心数 × 2**
  - **计算 密集型 = CPU 核心数**
- 空闲超时时间
  - **非核心线程**空闲后的存活时间
  - 30 s
- 时间单位
  - 指定空闲超时时间的单位
  - 常用秒或毫秒
- 任务阻塞队列
  - 核心线程全部忙时，新任务的临时等待队列
  - 必须使用有界队列，禁止使用无界队列（任务无限堆积会导致 OOM）
- 线程工厂
  - 用于创建线程池中的线程，统一管理线程属性
  - 自定义线程工厂可设置线程名、优先级、是否为守护线程
- 拒绝策略
  - 线程池饱和时的任务处理方案（队列满 + 最大线程数达上限）
  - JDK 提 4 种原生拒绝策略

## 执行流程

1. 核心线程数未达上限 → 直接创建核心线程执行任务；
2. 核心线程已满 → 新任务加入**任务队列**等待；
3. 任务队列已满 → 创建**非核心线程**执行任务；
4. 非核心线程达最大线程数 → 触发**拒绝策略**处理新任务。