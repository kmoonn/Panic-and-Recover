# 进程、线程与协程的区别

## 调度主体

进程、线程由操作系统调度

协程由程序（或运行时）调度

## 资源隔离程度不同

进程最隔离，线程次之，协程几乎全共享

## 切换成本不同

进程最贵，线程中等，协程便宜

## 编程复杂度不同

进程难在通信，线程难在同步，协程难在“记得让出控制权”

## 应用场景不同

进程适合稳定场景，浏览器、数据库、服务容器

线程适合 CPU 密集型并行计算

协程适合高并发网络、爬虫、异步 I/O

> 进程隔离服务，进程内跑线程池，线程里再跑成百上千个协程。

|         |  进程  |            线程            |      协程       |
|:-------:|:----:|:------------------------:|:-------------:|
|  调度主体   |      |          操作系统内核          |  用户程序 / 运行时   |
|  调度方式   |      |  抢占式（操作系统根据时间片、中断等强制切换）  |   协作式（主动让出）   |
|  资源消耗   |      |          内存占用较大          |    内存占用极小     |
|  上下文切换  |      |       需要内核态切换，成本较高       |  纯用户态切换，成本极低  |
|  适用场景   |      |        CPU 密集型计算         |  高并发 I/O 服务   |
