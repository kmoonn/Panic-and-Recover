# 🐛 MySQL中存储时间日期到底选择哪种类型

## 📅 日期与标签

- 记录日期：2025-04-06
- 标签：`#MySQL` `#日期时间` `#数据类型`

## 1. 🐞 问题现象

日常开发需求中，许多场景都会用的日期、时间这个字段。常见的比如创建时间created_at，更新时间update_at,交易时间等等。时间信息常常与业务逻辑紧密相连，正确选择MySQL的日期时间类型至关重要。

- 不要用字符串存储！！！

如果使用varchar等类型会导致效率非常低下。

## 2. 🔍 排查原因

- 空间效率

相比MySQL内建的日期时间类型，字符串通常需要占用更多的存储空间来表示相同的时间信息。

- 查询与计算效率

**比较操作复杂且低效**：基于字符串的日期比较需要按照字典序逐字符比较，而且如果格式不一致会导致错误,比如`2025-05-01`会小于`2025-1-10`。效率远低于使用原生日期时间类型。

**计算功能受限**：无法直接使用数据库提供的日期时间函数进行运算

**索引性能不佳**：基于字符串的索引在处理范围查询时，其效率和灵活性低于原生日期时间类型。

## 3. 🛠 解决方案

- **DATETIME**、**TIMESTAMP**

内置的用户存储包含日期、时间信息的数据类型，可以精确到秒。

**DATETIME**类型存储的是字面量的日期和时间值，本身不包含任何**时区**信息，如果系统需要支持多个时区，使用**DATATIME**就需要自行处理时区的转换和解释，要不然就会出现日期时间不一致的情况。

**TIMESTAMP**和时区有关，存储时MySQL会将当前会话时区下的时间值转换成UTC(协调世界时)进行内部存储。当查询时，MySQL会将存储的UTC时间换回当前会话所设置的时区来显示。

## 4. 💡 经验总结

```sql
select @@session.time_zone -- 查询当前会话时区（系统默认UTC+0）
SET time_zone = '' -- 设置当前会话时区
```