# 事务隔离级别

MySQL 支持 4 种标准隔离级别：

| 隔离级别                | 脏读 | 不可重复读 | 幻读 |
|---------------------|:--:|:-----:|:--:|
| read uncommitted    | ✔  |   ✔   | ✔  |
| read committed      | ✘  |   ✔   | ✔  |
| repeatable read（默认） | ✘  |   ✘   | ✔* |
| serializable        | ✘  |   ✘   | ✘  |

> - 脏读：读到未提交的数据 
> - 不可重复读：同一行数据多次读取结果不同
> - 幻读：同一条件多次查询，结果集 rows 不同

查看 MySQL 隔离级别

```sql
SELECT @@transaction_isolation;
```

默认是`REPEATABLE-READ`

## 读未提交 read uncommitted

一个事务还没提交时，它做的变更就能被其他事务看到。

## 读提交 read committed

一个事务提交之后，它做的变更才能被其他事务看到。

## 可重复读 repeatable read

一个事务执行过程中看到的数据，一直跟这个事务启动时看到的数据是一致的。

## 串行化 serializable

会对记录加上**读写锁**，在多个事务对这条记录进行读写操作时，如果发生了读写冲突，后访问的事务必须等前一个事务执行完成后才能继续执行。

**InnoDB** 在 `REPEATABLE READ` 下通过 **MVCC + Next-Key Lock**，在**大多数场景**下避免幻读。
